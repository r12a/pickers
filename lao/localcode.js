globals.showSimTrans = ''
globals.showTranslit =  ''
globals.typeAssist = ''
globals.typeAssist = ' ✓'
globals.showKeysTranslitToggle = false


window.charCheckerList = [
{ wrong:"ເເ", right:"ແ" },
{ wrong:"ໍາ", right:"ຳ" },
]


// list of fonts to add to the standard selection
window.fontsuggestions =  
`Lanexang Mon4`


function localInitialise () {
	}
	

var _h = {


"2026": ["E88", "ED0", "EAF"],
"E96": ["ED7", "E81"],
"ED7": ["E81", "E96"],
"E81": ["E96", "ED7"],
"EAE": ["EA3"],
"EA3": ["EAE"],
"E8A": ["E82"],
"E82": ["E8A"],
"EAA": ["E88", "EA5"],
"E88": ["EA5", "EAA",  "ED0", "EAF"],
"EA5": ["EAA", "E88"],
"E95": ["E84", "ED8", "E94"],
"E84": ["ED8", "E94", "E95"],
"ED8": ["E94", "E95", "E84"],
"E94": ["E95", "E84", "ED8"],
"EA2": ["EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D", "EC02DEB5E8D", "2DEB1E8D", "2DEB2E8D", "E8D"],
"EC02DEB1E8DEB0": ["EC02DEB1E8D", "EC02DE8D", "EC02DEB5E8D", "2DEB1E8D", "2DEB2E8D", "E8D", "EA2",  "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC12DEA7", "EC02DEBBEB2", "EC0", "EC1", "EC02DEB0", "EC02DEB1", "EC02DEB4", "EC02DEB5", "EC12DEB0", "EC12DEB1", "EC02DEB2EB0", "2DEBBEA7EB0", "EB0", "EC22DEB0", "2DEB1EBD", "2DEBBEA7", "EBB", "EB1"],
"EC02DEB1E8D": ["EC02DE8D", "EC02DEB5E8D", "2DEB1E8D", "2DEB2E8D", "E8D", "EA2", "EC02DEB1E8DEB0",  "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC12DEA7", "EC02DEBBEB2", "EC0", "EC1", "EC02DEB0", "EC02DEB1", "EC02DEB4", "EC02DEB5", "EC12DEB0", "EC12DEB1", "EC02DEB2EB0", "2DEB1EBD", "2DEBBEA7EB0", "2DEBBEA7", "EBB", "EB1"],
"EC02DE8D": ["EC02DEB5E8D", "2DEB1E8D", "2DEB2E8D", "E8D", "EA2", "EC02DEB1E8DEB0", "EC02DEB1E8D",  "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC12DEA7", "EC02DEBBEB2", "EC0", "EC1", "EC02DEB0", "EC02DEB1", "EC02DEB4", "EC02DEB5", "EC12DEB0", "EC12DEB1"],
"EC02DEB5E8D": ["2DEB1E8D", "2DEB2E8D", "E8D", "EA2", "EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D",  "EC12DEA7", "EC02DEBBEB2", "EC0", "EC1", "EC02DEB0", "EC02DEB1", "EC02DEB4", "EC02DEB5", "EC12DEB0", "EC12DEB1", "EC02DEB2EB0", "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EB4", "EB5", "EB6", "EB7", "2DEB4EA7"],
"2DEB1E8D": ["2DEB2E8D", "E8D", "EA2", "EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D", "EC02DEB5E8D",  "EC02DEBBEB2", "EBB", "EB1", "EC02DEB1", "EC12DEB1", "2DEB1EAD", "2DEB1EBD", "2DEBBEA7EB0"],
"2DEB2E8D": ["E8D", "EA2", "EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D", "EC02DEB5E8D", "2DEB1E8D",  "2DEB2EBD", "EC02DEBBEB2", "ED1", "EB3"],
"E8D": ["EA2", "EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D", "EC02DEB5E8D", "2DEB1E8D", "2DEB2E8D"],
"EAB": ["EDD", "EDC", "EABEBC", "E97"],
"EDD": ["EDC", "EABEBC", "E97", "EAB"],
"EDC": ["EABEBC", "E97", "EAB", "EDD"],
"EABEBC": ["E97", "EAB", "EDD", "EDC"],
"E97": ["EAB", "EDD", "EDC", "EABEBC"],
"E9B": ["EA1", "E99", "E9A"],
"EA1": ["E99", "E9A", "E9B"],
"E99": ["E9A", "E9B", "EA1"],
"E9A": ["E9B", "EA1", "E99"],
"E9C": ["E9D", "E9F", "ED6", "E9E"],
"E9D": ["E9F", "ED6", "E9E", "E9C"],
"E9F": ["ED6", "E9E", "E9C", "E9D"],
"ED6": ["E9E", "E9C", "E9D", "E9F"],
"E9E": ["E9C", "E9D", "E9F", "ED6"],
"ED4": ["ED5", "ED2"],
"ED5": ["ED2", "ED4"],
"ED2": ["ED4", "ED5"],
"EC3": ["EC4", "EC22DEB0", "EC2"],
"EC4": ["EC22DEB0", "EC2", "EC3"],
"EC22DEB0": ["EC2", "EC3", "EC4",  "EC12DEB0", "EC02DEB2EB0", "EC02DEB1E8DEB0", "2DEBBEA7EB0", "EB0"],
"EC2": ["EC3", "EC4", "EC22DEB0"],
"EC1": ["EC02DEB0", "EC02DEB1", "EC02DEB4", "EC02DEB5", "EC12DEB0", "EC12DEB1", "EC02DEB2EB0", "EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D", "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC02DEB5E8D", "EC12DEA7", "EC02DEBBEB2", "EC0"],
"EC02DEB0": ["EC02DEB1", "EC02DEB4", "EC02DEB5", "EC12DEB0", "EC12DEB1", "EC02DEB2EB0", "EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D", "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC02DEB5E8D", "EC12DEA7", "EC02DEBBEB2", "EC0", "EC1",  "EC22DEB0", "2DEBBEA7EB0"],
"EC02DEB1": ["EC02DEB4", "EC02DEB5", "EC12DEB0", "EC12DEB1", "EC02DEB2EB0", "EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D", "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC02DEB5E8D", "EC12DEA7", "EC02DEBBEB2", "EC0", "EC1", "EC02DEB0",  "2DEB1EAD", "2DEB1EBD", "2DEBBEA7EB0", "2DEBBEA7", "2DEB1E8D", "EBB"],
"EC02DEB4": ["EC02DEB5", "EC12DEB0", "EC12DEB1", "EC02DEB2EB0", "EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D", "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC02DEB5E8D", "EC12DEA7", "EC02DEBBEB2", "EC0", "EC1", "EC02DEB0", "EC02DEB1",  "2DEB4EA7", "2DEB5EA7", "EB4", "EB5", "EB6"],
"EC02DEB5": ["EC12DEB0", "EC12DEB1", "EC02DEB2EB0", "EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D", "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC02DEB5E8D", "EC12DEA7", "EC02DEBBEB2", "EC0", "EC1", "EC02DEB0", "EC02DEB1", "EC02DEB4",  "2DEB4EA7", "2DEB5EA7", "EB4", "EB5", "EB6"],
"EC12DEB0": ["EC12DEB1", "EC02DEB2EB0", "EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D", "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC02DEB5E8D", "EC12DEA7", "EC02DEBBEB2", "EC0", "EC1", "EC02DEB0", "EC02DEB1", "EC02DEB4", "EC02DEB5",  "2DEBBEA7EB0", "EB0"],
"EC12DEB1": ["EC02DEB2EB0", "EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D", "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC02DEB5E8D", "EC12DEA7", "EC02DEBBEB2", "EC0", "EC1", "EC02DEB0", "EC02DEB1", "EC02DEB4", "EC02DEB5", "EC12DEB0",  "2DEB1EAD", "2DEB1EBD", "2DEBBEA7EB0", "2DEBBEA7", "2DEB1E8D", "EBB"],
"EC02DEB2EB0": ["EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D", "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC02DEB5E8D", "EC12DEA7", "EC02DEBBEB2", "EC0", "EC1", "EC02DEB0", "EC02DEB1", "EC02DEB4", "EC02DEB5", "EC12DEB0", "EC12DEB1",  "2DEBBEA7EB0", "EB0"],
"EC02DEB6EAD": ["EC02DEB7EAD", "EC02DEB5EBD", "EC02DEB5E8D", "EC12DEA7", "EC02DEBBEB2", "EC0", "EC1", "EC02DEB0", "EC02DEB1", "EC02DEB4", "EC02DEB5", "EC12DEB0", "EC12DEB1", "EC02DEB2EB0", "EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D",  "2DEBBEA7EB0", "2DEBBEA7", "EA7", "EAD", "2DEB1EAD", "2DEB4EA7", "2DEB5EA7", "EB4", "EB5", "EB6"],
"EC02DEB7EAD": ["EC02DEB5EBD", "EC02DEB5E8D", "EC12DEA7", "EC02DEBBEB2", "EC0", "EC1", "EC02DEB0", "EC02DEB1", "EC02DEB4", "EC02DEB5", "EC12DEB0", "EC12DEB1", "EC02DEB2EB0", "EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D", "EC02DEB6EAD",  "2DEBBEA7EB0", "2DEBBEA7", "EA7", "EAD", "2DEB1EAD", "2DEB4EA7", "2DEB5EA7", "EB4", "EB5", "EB6"],
"EC02DEB5EBD": ["EC02DEB5E8D", "EC12DEA7", "EC02DEBBEB2", "EC0", "EC1", "EC02DEB0", "EC02DEB1", "EC02DEB4", "EC02DEB5", "EC12DEB0", "EC12DEB1", "EC02DEB2EB0", "EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D", "EC02DEB6EAD", "EC02DEB7EAD",  "2DEB2EBD", "EBD", "2DEB1EBD", "EB4", "EB5", "EB6", "EB7", "2DEB4EA7"],
"EC12DEA7": ["EC02DEBBEB2", "EC0", "EC1", "EC02DEB0", "EC02DEB1", "EC02DEB4", "EC02DEB5", "EC12DEB0", "EC12DEB1", "EC02DEB2EB0", "EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D", "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC02DEB5E8D",  "EA7", "EAD", "2DEB1EAD", "2DEB4EA7", "2DEB5EA7", "2DEBBEA7EB0"],
"EC02DEBBEB2": ["EC0", "EC1", "EC02DEB0", "EC02DEB1", "EC02DEB4", "EC02DEB5", "EC12DEB0", "EC12DEB1", "EC02DEB2EB0", "EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D", "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC02DEB5E8D", "EC12DEA7",  "ED1", "EB3", "EB2", "2DEB2E8D", "2DEB2EBD", "EBB", "EB1", "2DEB1EAD", "2DEB1EBD", "2DEBBEA7EB0", "2DEBBEA7"],
"EC0": ["EC1", "EC02DEB0", "EC02DEB1", "EC02DEB4", "EC02DEB5", "EC12DEB0", "EC12DEB1", "EC02DEB2EB0", "EC02DEB1E8DEB0", "EC02DEB1E8D", "EC02DE8D", "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC02DEB5E8D", "EC12DEA7", "EC02DEBBEB2"],
"2DEBBEA7EB0": ["EB0", "EC02DEB0", "EC22DEB0", "EC12DEB0", "EC02DEB2EB0", "EC02DEB1E8DEB0",  "2DEBBEA7", "EC12DEA7", "EA7", "EAD", "2DEB1EAD", "2DEB4EA7", "2DEB5EA7", "EC02DEB6EAD", "EC02DEB7EAD", "2DEB1E8D", "EC02DEBBEB2", "EBB", "EB1", "EC02DEB1", "EC12DEB1", "EC02DEB1E8D"],
"EB0": ["EC02DEB0", "EC22DEB0", "EC12DEB0", "EC02DEB2EB0", "EC02DEB1E8DEB0", "2DEBBEA7EB0"],
"EAD": ["2DEB1EAD", "2DEB4EA7", "2DEB5EA7", "EC02DEB6EAD", "EC02DEB7EAD", "2DEBBEA7EB0", "2DEBBEA7", "EC12DEA7", "EA7"],
"2DEB1EAD": ["2DEB4EA7", "2DEB5EA7", "EC02DEB6EAD", "EC02DEB7EAD", "2DEBBEA7EB0", "2DEBBEA7", "EC12DEA7", "EA7", "EAD",  "EC02DEB1E8DEB0", "EC02DEB1E8D", "2DEB1EBD", "2DEB1E8D", "EC02DEBBEB2", "EBB", "EB1", "EC02DEB1"],
"2DEB4EA7": ["2DEB5EA7", "EC02DEB6EAD", "EC02DEB7EAD", "2DEBBEA7EB0", "2DEBBEA7", "EC12DEA7", "EA7", "EAD", "2DEB1EAD",  "EC02DEB5EBD", "EC02DEB5E8D", "EB4", "EB5", "EB6", "EB7", "EC02DEB4"],
"2DEB5EA7": ["EC02DEB6EAD", "EC02DEB7EAD", "2DEBBEA7EB0", "2DEBBEA7", "EC12DEA7", "EA7", "EAD", "2DEB1EAD", "2DEB4EA7",  "EC02DEB5EBD", "EC02DEB5E8D", "EB4", "EB5", "EB6", "EB7", "EC02DEB4"],
"2DEBBEA7": ["EC12DEA7", "EA7", "EAD", "2DEB1EAD", "2DEB4EA7", "2DEB5EA7", "EC02DEB6EAD", "EC02DEB7EAD", "2DEBBEA7EB0",  "2DEB1E8D", "EC02DEBBEB2", "EBB", "EB1", "EC02DEB1", "EC12DEB1", "EC02DEB1E8DEB0", "EC02DEB1E8D"],
"EA7": ["EAD", "2DEB1EAD", "2DEB4EA7", "2DEB5EA7", "EC02DEB6EAD", "EC02DEB7EAD", "2DEBBEA7EB0", "2DEBBEA7", "EC12DEA7"],
"2DEB1EBD": ["EC02DEB5EBD", "2DEB2EBD", "EBD",  "2DEBBEA7EB0", "2DEBBEA7", "2DEB1E8D", "EC02DEBBEB2", "EBB", "EB1", "EC02DEB1", "EC12DEB1", "2DEB1EAD", "EC02DEB1E8DEB0"],
"2DEB2EBD": ["EBD", "2DEB1EBD", "EC02DEB5EBD",  "EC02DEBBEB2", "ED1", "EB3", "EB2"],
"EBD": ["2DEB1EBD", "EC02DEB5EBD", "2DEB2EBD"],
"EC6EA5EC6": ["E87", "EC6"],
"E87": ["EC6", "EC6EA5EC6"],
"EC6": ["EC6EA5EC6", "E87"],
"ED1": ["EB3", "EB2", "2DEB2E8D", "2DEB2EBD", "EC02DEBBEB2"],
"EB3": ["EB2", "2DEB2E8D", "2DEB2EBD", "EC02DEBBEB2", "ED1",  "ECC"],
"EB2": ["2DEB2E8D", "2DEB2EBD", "EC02DEBBEB2", "ED1", "EB3"],
"EB5": ["EB6", "EB7", "EC02DEB4", "EC02DEB5", "2DEB4EA7", "2DEB5EA7", "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC02DEB5E8D", "EB4"],
"EB6": ["EB7", "EC02DEB4", "EC02DEB5", "2DEB4EA7", "2DEB5EA7", "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC02DEB5E8D", "EB4", "EB5"],
"EB7": ["EC02DEB4", "EC02DEB5", "2DEB4EA7", "2DEB5EA7", "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC02DEB5E8D", "EB4", "EB5", "EB6"],
"EB4": ["EB5", "EB6", "EB7", "EC02DEB4", "EC02DEB5", "2DEB4EA7", "2DEB5EA7", "EC02DEB6EAD", "EC02DEB7EAD", "EC02DEB5EBD", "EC02DEB5E8D"],
"EB1": ["EC02DEB1", "EC12DEB1", "2DEB1EAD", "EC02DEB1E8DEB0", "EC02DEB1E8D", "2DEB1EBD", "2DEBBEA7EB0", "2DEBBEA7", "2DEB1E8D", "EC02DEBBEB2", "EBB"],
"EBB": ["EB1", "EC02DEB1", "EC12DEB1", "2DEB1EAD", "EC02DEB1E8DEB0", "EC02DEB1E8D", "2DEB1EBD", "2DEBBEA7EB0", "2DEBBEA7", "2DEB1E8D", "EC02DEBBEB2"],
"ECC": ["ECD", "EB3"],
"ECD": ["EB3", "ECC"],
"ED0": ["EAF", "2026", "E88"],
"EAF": ["2026", "E88", "ED0"],







/*
'E81': ['E96', 'ED7'],
'E82': ['E8A'],
'E84': ['E94'],
'E87': ['EC6'],
'EAA': ['EA5'],
'E8A': ['E82'],
'E8D': ['EA2'],
'E94': ['E95', 'E84'],
'E95': ['ED8', 'E94'],
'E96': ['ED7', 'E81'],
'E97': ['EAB', 'EDC', 'EDD'],
'E99': ['EA1', 'E9A'],
'E9A': ['E9B', 'E99'],
'E9B': ['E9A', 'E99'],
'E9C': ['E9D', 'E9E', 'E9F', 'ED6'],
'E9E': ['E9D', 'E9C', 'E9F', 'ED6'],
'E9D': ['E9C', 'E9E', 'E9F', 'ED6'],
'EA1': ['E99', 'E9A'],
'EA2': ['E8D'],
'EA5': ['EAA'],
'EAB': ['EDC', 'EDD', 'E97'],
'EAE': ['EA3'],
'EDC': ['EDD', 'EAB', 'E97'],
'EDD': ['EDC', 'EAB', 'E97'],
'EA3': ['EAE'],
'EB3': ['EB2'],
'EB2': ['EB3'],
'EC6': ['EC6EA5EC6'],
'EC6EA5EC6': ['EC6'],
'ED7': ['E96', 'E81'],
'ED8': ['E95'],
'ED9': ['E97'],
'ED6': ['E9D', 'E9F', 'E9C', 'E9E'],
'ED2': ['ED5', 'ED4'],
*/
end: {}
}




var keyboarddef = [
"§|1 ຢ ໑|2 ຟ ໒|3 ໂ ໓|4 ຖ ໔|5 ຸ ໌|6 ູ ຼ|7 ຄ ໕|8 ຕ ໖|9 ຈ ໗|0 ຂ ໘|- ຊ ໙|= ໍ ໍ່",
"q ົ ົ້|w ໄ ໐|e ຳ ຳ້|r ພ _|t ະ +|y ິ ິ້|u ີ ີ້|i ຮ ຣ|o ນ ໜ|p ຍ ຽ|[ ບ -|] ລ ຫຼ",
"a ັ ັ້|s ຫ ;|d ກ .|f ດ ,|g ເ :|h ້ ໊|j ່ ໋|k າ !|l ສ ?|; ວ %|' ງ =|\\ “ ”",
"` * /|z ຜ ₭|x ປ (|c ແ ຯ|v ອ x|b ຶ ຶ້|n ື ື້|m ທ ໆ|, ມ ໝ|. ໃ $|/ ຝ )"
]




function sendVowelRight (str) {
    str = str.replace(/(ເ|ແ|ໂ|ໃ|ໄ)(.)/g, '$2$1')
    console.log(str)
    return str
    }


function addVowel (ch) {
	// ch: string, the text to be added
	
	if (document.getElementById('output').style.display == 'none') { return; }
	var outputNode = document.getElementById( 'output' ); // points to the output textarea

	
	//IE support
	if (document.selection) { 
		outputNode.focus()
	    range = document.selection.createRange()
		
        // merge the base and the vowels
        ch = ch.replace('-',range.text)
        
		range.text = ch; 
	    range.select(); 
		if (globals.refocus) outputNode.focus() 
		}
	// Mozilla and Safari support
	else if (outputNode.selectionStart || outputNode.selectionStart == '0') {
		var startPos = outputNode.selectionStart
		var endPos = outputNode.selectionEnd
		var cursorPos = startPos
		var scrollTop = outputNode.scrollTop
		var baselength = 0
		
        // get whatever is highlighted, or if no highlight the previous character
        var consonant
        if (startPos === endPos) startPos = startPos-1
        consonant = outputNode.value.substring(startPos,endPos)
        console.log(consonant)
        
        // merge the base and the vowels
        ch = ch.replace('◌',consonant)
        
		outputNode.value = outputNode.value.substring(0, startPos)
              + ch
              + outputNode.value.substring(endPos, outputNode.value.length)
		cursorPos += ch.length

		if (globals.refocus) outputNode.focus()
		outputNode.selectionStart = cursorPos
		outputNode.selectionEnd = cursorPos
		if (! globals.refocus) outputNode.blur()
		}
	else {
		outputNode.value += ch
		if (globals.refocus) outputNode.focus()
		}
		
	// normalize
	if (globals.n11n=='nfc') { outputNode.value = outputNode.value.normalize('NFC') }
	else if (globals.n11n=='nfd') { outputNode.value = outputNode.value.normalize('NFD') }
	}




function addVowelX (ch) {
	// ch: string, the text to be added
	
	if (document.getElementById('output').style.display == 'none') { return; }
	var outputNode = document.getElementById( 'output' ); // points to the output textarea

	
	//IE support
	if (document.selection) { 
		outputNode.focus()
	    range = document.selection.createRange()
		
        // merge the base and the vowels
        ch = ch.replace('-',range.text)
        
		range.text = ch; 
	    range.select(); 
		if (globals.refocus) outputNode.focus() 
		}
	// Mozilla and Safari support
	else if (outputNode.selectionStart || outputNode.selectionStart == '0') {
		var startPos = outputNode.selectionStart
		var endPos = outputNode.selectionEnd
		var cursorPos = startPos
		var scrollTop = outputNode.scrollTop
		var baselength = 0
		
        // get whatever is highlighted, or if no highlight the previous character
        var consonant
        if (startPos === endPos) startPos = startPos-1
        consonant = outputNode.value.substring(startPos,endPos)
        console.log(consonant)
        
        // merge the base and the vowels
        ch = ch.replace('-',consonant)
        
		outputNode.value = outputNode.value.substring(0, startPos)
              + ch
              + outputNode.value.substring(endPos, outputNode.value.length)
		cursorPos += ch.length

		if (globals.refocus) outputNode.focus()
		outputNode.selectionStart = cursorPos
		outputNode.selectionEnd = cursorPos
		if (! globals.refocus) outputNode.blur()
		}
	else {
		outputNode.value += ch
		if (globals.refocus) outputNode.focus()
		}
		
	// normalize
	if (globals.n11n=='nfc') { outputNode.value = outputNode.value.normalize('NFC') }
	else if (globals.n11n=='nfd') { outputNode.value = outputNode.value.normalize('NFD') }
	}




var simmalaCharacterMap = `
b b ບ bp ປ
d d ດ dt ຕ
f f ຝ f ຟ
g g ກ
h h ຫ h ຮ
j j ຈ
k k ຂ k ຄ -k ກ
l l ລ l ຫຼ l ຫລ
m m ມ m ໝ m ຫມ
n n ນ n ໜ n ຫນ ng ງ ng ຫງ n ຍy ny ຫຍ
p p ຜ p ພ -p ບ
s s ສ s ຊ
t t ຖ t ທ -t ດ
w w ວ w ຫວ
y y ຢ
O ∅ ອ ∅ ຫ
a a ະ a ັ aa າ aai າຍ aao ເ-ົາ aao າວ ai ໄ- ai ໃ- am ຳ ao ເ-ົາ
e e ເ-ະ e ເ-ັ ee ເ- eeo ເ-ວ ə ເ-ຶ əə ເ-ິ əəi ເ-ີຍ əi ເ-ີຍ ɛ ແ-ະ ɛɛ ແ- ɛo ແ-ວ ɛɛo ແ-ວ
i i ິ ii ີ ia ເ-ັຍ ia ເ-ັຍະ ia ັຽ ia ເ-ຍ ia ເ-ຽ ia ຽ iao ຽວ iu ິວ
o o ໂ-ະ o ວ oo ໂ- ooi ໂ-ຍ ɔ ເ-າະ ɔ ັອ ɔi ອຍ ɔɔ ໍ ɔɔi ອຍ
u ua ົວ ua ົວະ ua ັວ ua ວ uai ວຍ ui ຸຍ uu ູ ʉ ຶ ʉa ເ-ຶອ ʉa ເ-ືອ ʉai ເ-ືອຍ ʉʉ ື
`


/*
SHAPE LIST

ກ ຖ ໗
ຣ ຮ
ຂ ຊ
ລ ສ ຈ
ດ ຕ ຄ ໘
ຍ ຢ ເ-ັຍະ ເ-ັຍ ເ-ຍ ເ-ີຍ -ັຍ -າຍ
ທ ຫ ໝ ໜ ຫຼ
ບ ປ ມ ນ
ພ ຜ ຝ ຟ ໖
໒ ໔ ໕
ໂ ໃ ໄ ໂ-ະ
ເ ແ ເ-ະ ເ-ັ ເ-ິ ເ-ີ ແ-ະ ແ-ັ ເ-າະ ເ-ັຍະ ເ-ັຍ ເ-ຍ ເ-ຶອ ເ-ືອ ເ-ີຽ ເ-ີຍ ແ-ວ ເ-ົາ
ະ ເ-ະ ໂ-ະ ແ-ະ ເ-າະ ເ-ັຍະ -ົວະ
ວ ອ -ັອ -ິວ -ີວ ເ-ຶອ ເ-ືອ -ົວະ -ົວ ແ-ວ
ຽ -ັຽ ເ-ີຽ -າຽ
ໆ ໆລໆ
າ -າຍ -າຽ ເ-ົາ ໑
ິ ີ ຶ ື ເ-ິ ເ-ີ -ິວ -ີວ ເ-ຶອ ເ-ືອ ເ-ີຽ ເ-ີຍ
ົ ັ ເ-ັ ແ-ັ -ັອ ເ-ັຍະ ເ-ັຍ -ັຽ -ົວະ -ົວ -ັຍ ເ-ົາ
ໍ ຳ ໌
… ຈ ໐ ຯ
*/

